
## æ ‘
éçº¿æ€§æ•°æ®ç»“æ„<br />ç›¸å…³æœ¯è¯­

1. æ ¹èŠ‚ç‚¹ root
2. å­èŠ‚ç‚¹ child
3. å†…éƒ¨èŠ‚ç‚¹/å¶èŠ‚ç‚¹ leaf
4. å­æ ‘ subTree
5. æ·±åº¦ depth
6. é«˜åº¦ height
7. è¾¹

### äºŒå‰æ ‘
äºŒå‰æ ‘è§„å®š: æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰**ä¸¤ä¸ª**å­èŠ‚ç‚¹: å·¦ä¾§å­èŠ‚ç‚¹å’Œå³ä¾§å­èŠ‚ç‚¹.

#### äºŒå‰æœç´¢æ ‘(BST)
äºŒå‰æœç´¢æ ‘(Binary Search Tree) æ˜¯äºŒå‰æ ‘çš„ä¸€ç§, ä½†æ˜¯åªå…è®¸åœ¨**å·¦ä¾§èŠ‚ç‚¹**å­˜å‚¨(æ¯”çˆ¶èŠ‚ç‚¹)**å°**çš„å€¼, åœ¨**å³ä¾§èŠ‚ç‚¹**å­˜å‚¨(æ¯”çˆ¶èŠ‚ç‚¹)**å¤§(æˆ–ç­‰äº)**çš„å€¼.

##### å®ç°
ç±»ä¼¼äºåŒå‘é“¾è¡¨ä¸­ `next`Â å’Œ `prev`Â çš„æŒ‡é’ˆ, èŠ‚ç‚¹ä¸Šä¹Ÿæœ‰å·¦ `left`Â å³ `right`Â ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å·¦å³ä¾§çš„å­èŠ‚ç‚¹.
```javascript
class Node {
	constructor (key) {
  	this.key = key
    this.left = null
    this.right = null
  }
}

// ç§æœ‰è¾…åŠ©å‡½æ•°
// ä½¿ç”¨WeekMapæ˜¯å› ä¸º WeekMap æ•°æ®ç»“æ„çš„é”®åªèƒ½ä½¿ç”¨å¯¹è±¡
// å¹¶ä¸”ä¸èƒ½ä½¿ç”¨ç±»ä¼¼ Map çš„keys, values, entriesæ–¹æ³•
// ä½¿å­˜å‚¨çš„å€¼åªèƒ½é€šè¿‡é”®æ¥æŸ¥æ‰¾ğŸ˜€

const _insertNode = new WeakMap()

class BinarySearchTree {
	constructor () {
  	this.root = null
    // è®¾å®šç§æœ‰å‡½æ•°
    _insertNode.set(this, (node, newNode) => {
    	if (newNode.key < node.key) { // å·¦ä¾§èŠ‚ç‚¹
      	if (node.left === null) {
        	node.left = newNode // æ–°çš„å·¦ä¾§èŠ‚ç‚¹
        } else {
					_insertNode.get(this)(node.left, newNode) // ä¸‹ä¸€å±‚ç»§ç»­
        }
      } else { // å³ä¾§èŠ‚ç‚¹
        if (node.right === null) {
        	node.right = newNode
        } else {
          _insertNode.get(this)(node.right, newNode) // ä¸‹ä¸€å±‚ç»§ç»­
        }
      }
    })
  }
  // æ’å…¥
  insert (key) {
    let newNode = new Node(key)
    if (this.root === null) {
    	this.root = new Node
    } else {
    	this._insertNode(newNode)
    }
  }
  
  // æŸ¥æ‰¾é”®
  search (key) {
  }
  // é€šè¿‡ååºéå†æ–¹å¼éå†æ‰€æœ‰èŠ‚ç‚¹
  postOrderTraverse () {
  }
  // è¿”å›æ ‘ä¸­æœ€å°çš„é”®/å€¼
  min () {
  }
  // è¿”å›æ ‘ä¸­æœ€å¤§çš„é”®/å€¼
  max () {
  }
  // åˆ é™¤é”®
  remove (key) {
  }
}
```


#### æ ‘çš„éå†
åˆ†ä¸º `ä¸­åº`Â `å…ˆåº`Â `ååº`Â éå†

##### ä¸­åºéå†
ä¸­åºéå†æ˜¯ä¸€ç§ä»¥**ä¸Šè¡Œé¡ºåº**è®¿é—®BSTæ‰€æœ‰èŠ‚ç‚¹çš„éå†æ–¹å¼. å…¶åº”ç”¨å°±æ˜¯å¯¹æ ‘è¿›è¡Œæ’åº
> ä¸Šè¡Œé¡ºåº: ä»æœ€å°åˆ°æœ€å¤§. åœ¨BSTä¸­æ„æ€å³æ˜¯ ä»å·¦åˆ°å³, ä»å°åˆ°å¤§. å› ä¸ºBSTä¸­å·¦ä¾§æ€»æ¯”å³ä¾§èŠ‚ç‚¹çš„å€¼å°


```javascript
const _inOrderTraverseNode = new WeekMap()

class BinarySearchTree {
	// ...
  constructor (...) {
  	// ...
    // ç§æœ‰è¾…åŠ©å‡½æ•°
    _inOrderTraverseNode.set(this, (node, callback) => {
    	if (node !== null) { // åœæ­¢é€’å½’çš„æ¡ä»¶
      	_inOrderTraverseNode.get(this)(node.left, callback) // éå†å·¦ä¾§èŠ‚ç‚¹
        callback(node.key) // éå†èŠ‚ç‚¹æ—¶çš„å›è°ƒ
        _inOrderTraverseNode.get(this)(node.right, callback) // éå†å³ä¾§èŠ‚ç‚¹
      }
    })
  }
  
  // é€šè¿‡ä¸­åºéå†æ–¹å¼éå†æ‰€æœ‰èŠ‚ç‚¹
  inOrderTraverse (callback) { // æ¥å—ä¸€ä¸ªcallbackå‡½æ•°ä½œå‚
    								// ç”¨ä»¥å®šä¹‰å¯¹éå†åˆ°çš„æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œçš„æ“ä½œ
    								// ğŸ‘† è¿™å« â™¥è®¿é—®è€…æ¨¡å¼â™¥
    _inOrderTraverseNode.get(this)(this.root, callback)
  }
}
```

##### å…ˆåºéå†
å…ˆåºéå†æ˜¯ä»¥**ä¼˜å…ˆäºåä»£èŠ‚ç‚¹**çš„é¡ºåºè®¿é—®æ¯ä¸ªèŠ‚ç‚¹çš„. å…¶åº”ç”¨æ˜¯æ‰“å°ä¸€ä¸ªç»“æ„åŒ–çš„æ–‡æ¡£.
> ä¼˜å…ˆäºåä»£: æ•…åæ€æ„, åœ¨éå†æ—¶å…ˆcallbackå½“å‰èŠ‚ç‚¹, åœ¨å¯¹å­èŠ‚ç‚¹è¿›è¡Œéå†


```javascript
const _preOrderTraverseNode = new WeekMap()
class BinarySearchTree {
	constructor (...) {
    // ...
    // ç§æœ‰è¾…åŠ©å‡½æ•°
    _preOrderTraverseNode.set(this, (node, callback) => {
    	if (node !== null) {
      	callback(node.key)
        _proOrderTraverseNode.get(this)(node.left, callback)
        _proOrderTraverseNode.get(this)(node.right, callback)
      }
    })
  }
  // é€šè¿‡å…ˆåºéå†æ–¹å¼éå†æ‰€æœ‰èŠ‚ç‚¹
  preOrderTraverse () {
    _proOrderTraverseNode.get(this)(node, callback)
  }
}
```

##### ååºéå†
ååºéå†æ˜¯å…ˆè®¿é—®èŠ‚ç‚¹çš„åä»£èŠ‚ç‚¹, å†è®¿é—®èŠ‚ç‚¹æœ¬èº«. åº”ç”¨åœ¨è®¡ç®—ä¸€ä¸ªç›®å½•å’Œå®ƒçš„å­ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶æ‰€å ç©ºé—´å¤§å°

```javascript
const _postOrderTraverseNode = new WeekMap()
class BinarySearchTree {
	constructor (...) {
    // ...
    // ç§æœ‰è¾…åŠ©å‡½æ•°
    _postOrderTraverseNode.set(this, (node, callback) => {
    	if (node !== null) {
        _postOrderTraverseNode.get(this)(node.left, callback)
        _postOrderTraverseNode.get(this)(node.right, callback)
      	callback(node.key)
      }
    })
  }
  // é€šè¿‡ååºéå†æ–¹å¼éå†æ‰€æœ‰èŠ‚ç‚¹
  postOrderTraverse () {
    _postOrderTraverseNode.get(this)(node, callback)
  }
}
```

#### æœç´¢
ä¸€èˆ¬æ¥è¯´, å¯¹æ ‘çš„æœç´¢åˆ†ä¸º:

1. æœç´¢æœ€å¤§å€¼
2. æœç´¢æœ€å°å€¼
3. æœç´¢ç‰¹å®šå€¼

##### Max || Min
å¯¹äºBSTæ¥è¯´, Minæ„å‘³ç€æ˜¯æœ€å·¦ä¾§çš„å¶èŠ‚ç‚¹, Maxæ˜¯æœ€å³ä¾§çš„å¶èŠ‚ç‚¹.

```javascript
const _minNode = new WeakMap(),
      _maxNode = new WeakMap(),
      _searchNode = new WeakMap()
class BinarySearchTree {
  constructor (...) {
  	// ...
    // è¾…åŠ©å‡½æ•°
    /**
     * min
     */
    _minNode.set(this, (node) => {
    	if (node) {
      	while (node.left) {
          node = node.left // æŒç»­å¾ªç¯æœç´¢æœ€å·¦ä¾§çš„å­èŠ‚ç‚¹ç›´åˆ°å¶èŠ‚ç‚¹
        }
        return node.key
      }
      return null
    })
    /**
     * max
     */
    _maxNode.set(this, (node) => {
      if (node) {
      	while (node.right) {
        	node = node.right
        }
        return node.key
      }
      return null
    })
    /**
     * search å¹¶ä¸æ˜¯è¯´æ‰¾åˆ°æ‹¿å‡ºæ¥, è€Œæ˜¯æ ‘ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªkey. ç±»ä¼¼ has
     */
    _searchNode.set(this, (node, key) => {
      if (node === null) {
        return false
      }
      if (key < node.key) {
      	_searchNode.get(this)(node.left)
      } else if (key > node.key) {
      	_searchNode.get(this)(node.right)
      } else {
      	return true
      }
    })
  }
  // æœç´¢æœ€å°å€¼çš„æ–¹æ³•
  min () {
    let root = this.root
  	return _minNode.get(this)(root)
  }
  // æœç´¢æœ€å¤§å€¼çš„æ–¹æ³•
  max () {
    let root = this.root
  	return _maxNode.get(this)(root)
  }
  // æœç´¢ç‰¹å®šçš„å€¼
  search (key) {
    let root = this.root
  	return _searchNode.get(this)(root, key)
  }
}
```

#### ç§»é™¤
`remove`Â 

```javascript
const _removeNode = new WeakMap()

class BinarySearchTree {
	constructor (...) {
    // ...
    _removeNode.set(this, (node, key) => {
    	if (node === null) {
      	return null
      }
      if (key < node.key) {
      	node.left = _removeNode.get(this)(node.left)
        return node
      } else if (key > node.key) {
      	node.right = _removeNode.get(this)(node.right)
        return node
      } else {
        // æƒ…å†µ1 : nodeä¸ºå¶èŠ‚ç‚¹
        if (node.left === null && node.right === null) {
        	node = null
          return node
        }
        // æƒ…å†µ2 : nodeä¸ºæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹
        if (node.left === null) {
        	node = node.right
          return node
        }
        if (node.right === null) {
        	node = node.left
          return node
        }
        // æƒ…å†µ3 : nodeä¸ºæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹
        // ğŸˆç®€è¦æ“ä½œä¸º:
        // ğŸ•åˆ é™¤è¯¥node, å¹¶æ‰¾åˆ°ä»–å³ä¾§èŠ‚ç‚¹çš„æœ€å°çš„å­èŠ‚ç‚¹(å·¦)
        // ç”¨è¿™ä¸ªæœ€å°å­èŠ‚ç‚¹æ›¿æ¢è¢«åˆ é™¤çš„node
        let aux = this._findMinNode() // æ‰¾åˆ°æœ€å°å­èŠ‚ç‚¹
        node.key = aux.key // æ›¿æ¢é”®å€¼
        node.right = _removeNode.set(this)(node.right, aux.key) // æ›´æ–°å³ä¾§å­èŠ‚ç‚¹æ ‘
        return node
      }
    })
    _findMinNode () {
    	let node = this.root
      while (node && node.left) {
      	node = node.left
      }
      return node
    }
  }
}
```

